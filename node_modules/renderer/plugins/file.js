var toolset 			= require('toolset');

exports.plugins = {
	include:	{
		cache:	true,	// Can it be rendered in the cache?
		render:	true,	// Does the output need to be re-rendered?
		parse:	function(regex, match, expr, pos, data, callback) {
			toolset.file.read("pages/views/"+expr, function(content) {
				callback(content);
			});
		}
	},
	jsinclude:	{
		cache:	false,	// Can it be rendered in the cache?
		render:	false,	// Does the output need to be re-rendered?
		parse:	function(regex, match, expr, pos, data, callback) {
			if (data[expr]) {
				var i;
				var l = data[expr].length;
				var output = [];
				for (i=0;i<l;i++) {
					output.push('<script src="'+data[expr][i]+'"></script>');
				}
				callback(output.join('\n'));
			} else {
				callback('');
			}
		}
	}
}